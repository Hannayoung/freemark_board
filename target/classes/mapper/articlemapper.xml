<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="articlemapper">

	<resultMap type="article" id="articleResult">
		<result property="articleId" column="article_id"/>
		<result property="title" column="title"/>
		<result property="content" column="content"/>
		<result property="crtDate" column="crt_date"/>
		<result property="upDate" column="up_date"/>
		<result property="cusName" column="cus_name"/>
		<result property="email" column="cus_email"/>
	</resultMap>
	
	
	<!-- 	cusid 넣어줄 것인지 고려해야 함. -->
	<insert id="insert" parameterType="article" >
		INSERT INTO ARTICLE(
			title,
			content,
			cus_name,
			cus_email
		)
		VALUES ( 
			#{title},
			#{content},
			#{cusName},
			#{email}
		)       
		<selectKey keyProperty="article_id" resultType="int">
			select last_insert_id()
		</selectKey>
	</insert>
	
<!-- 	글 가져오기  -->
	<select id="select" parameterType="Integer" resultMap="articleResult">
		SELECT ARTICLE_ID,TITLE,CONTENT,CRT_DATE 
		FROM ARTICLE 
		WHERE ARTICLE_ID = #{articleId}
	</select>
	
<!-- 	게시판 전체 글 가져오기 수정 날짜 null 체크 후 처리 필요 -->
	<select id="selectAll" resultMap="articleResult">
		SELECT * 
		FROM ARTICLE 
		ORDER BY ARTICLE_ID DESC
	</select>
	
	<update id="update" parameterType="article" >
		UPDATE ARTICLE 
		SET TITLE=#{title}, CONTENT=#{content}, UP_DATE=#{upDate} 
		WHERE ARTICLE_ID = #{articleId}
	</update>
	
	<delete id="delete" parameterType="Integer" >
		DELETE FROM ARTICLE WHERE ARTICLE_ID = #{articleId}
	</delete>

	
</mapper>